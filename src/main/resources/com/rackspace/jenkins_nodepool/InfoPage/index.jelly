<?jelly escape-by-default='true'?>
<j:jelly xmlns:j="jelly:core" xmlns:st="jelly:stapler" xmlns:d="jelly:define" xmlns:l="/lib/layout" xmlns:t="/lib/hudson" xmlns:f="/lib/form" xmlns:s="/lib/samples">
    <l:layout title="NodePools">
        <l:main-panel>
            <h1>NodePools</h1>
            <j:forEach var="np" items="${it.nodePools}">
                <h2>NodePool: ${np.connectionString}</h2>
                <h3>Nodes:</h3>   
                <!-- todo show build executing on computer --> 
                <ul>
                    <j:forEach var="computer" items="${np.Nodes}">
                        <li>
                            <p>${computer}</p>
                        </li>
                    </j:forEach>
                </ul>
                <h3> Requests </h3>
                <!-- TODO: show the queue item that relates to this request -->
                <table>
                    <tr>
                    <th>Request</th>
                    <th>Label</th>
                    <th>Age</th>
                    </tr>
                        
                    <j:forEach var="request" items="${np.Requests}">
                        <tr>
                            <td>${request}</td>
                            <td>$(request.label}</td>
                            <td>TODO: age</td>
                        </tr>
                        
                    </j:forEach>
                </table>
                
            </j:forEach>
            <!-- todo: queue scan button -->
        </l:main-panel>
    </l:layout>
</j:jelly>